@page "/"
@using Blazor_pizza.Data
@inject PizzaService PizzaSvc

<head>
    <link href="~/css/StyleSheet.css" rel="stylesheet" />
</head>

<style>
    .button-1 {
        background-color: #EC583D;
        color: white;
        font-family: 'Century Gothic';
        border-color: #EC583D;
        border-radius: 16px;
        height: 80px;
        width: 10%;
        margin-right: 25%;
        font-size: 30px
    }

    .searchbar-1 {
        display: block;
        width: 40%;
        height: 80px;
        font-size: 30px;
        margin-left: 25%;
        margin-right: 2%
    }

    .checkbox-1 {
        border-radius: 16px;
        width: 2%;
        margin-right: 2%
    }

    .normalText {
        font-family: 'Century Gothic';
        font-size: 30px;
        margin-right: 2%
    }

    .boldText {
        font-family: 'Century Gothic';
        font-size: 30px;
        font-weight: bold;
        margin-left: 25%;
        margin-right: 10%
    }

    .pizzaInfo {
        width: 15%;
        height: 400px;
        border: 3px solid #0D0C0C;
        border-radius: 16px;
        opacity: 1;
        margin-right: 2.5%;
    }

    .title {
        padding: 10px;
        font-family: 'Century Gothic';
        font-size: 30px;
        font-weight: bold;


    }

    .price {
        font-family: 'Century Gothic';
        font-size: 30px;
        padding: 10px;
    }



</style>

@*image of blazing pizza and the logo*@
<div><img src="Images/PizzaHomePage.png" alt="Pizza" style="width: 1920px; height: 547px"/></div><br />

@*the our menu, and the vegan/vegetarian checkboxes*@
<div style="display: flex">
    <label class="boldText">Our Menu</label>
    <input type="checkbox" class="checkbox-1" />
    <label class="normalText">Vegetarian</label>
    <input type="checkbox" class="checkbox-1"/>
    <label class="normalText">Vegan</label>
</div><br />

@*search bar and submit search button*@
<div style="display: flex">
    <input type="search" class="searchbar-1" />
    <button class="button-1">Submit</button>
</div><br /><br /><br />

@*This iterates through all the pizzas held in the database and displays their price and name*@
<div style="display:flex; flex-wrap:wrap; align-items: centre; justify-content: center">
    @foreach(var pizza in todaysPizzas)
    {
        if (pizza != null)
        {
            if ((count-1) % 4 == 0 && count != 1)
            {
                <div style="flex-basis: 100%; height: 0%"></div>
                <br /><br />


                <div class="pizzaInfo">
                    <img src="Images/Pepperoni.png" alt=@pizza.Name style="width: 100%" /> @*image of the pizza*@

                    @*this checks whether the pizza is vegan or vegetarian and displays an icon showing this*@
                    @if (pizza.Vegetarian == true)
                    {
                        // display vegan
                        @if (pizza.Vegan == true) {  <span class="price" style="color: forestgreen">Vegan</span><br /> }
                        //its only vegetarian so display vegetarian logo
                        else { <span class="price" style="color: forestgreen">Vegetarian</span><br /> }
                    }
                    // it is neither vegan or vegetarian so leave a space
                    else { <div style="flex-basis: 100%; height: 0%"></div><br /><br /> }


                    <span class="title">@pizza.Name</span><br />
                    <span class="price">@pizza.Price</span><br />
                    <button class="button-1" style="width:90%; height: 15%; margin-left: 5%">Learn more</button>

                </div>
            }
            else
            {
                <div class="pizzaInfo">
                    <img src="Images/Pepperoni.png" alt=@pizza.Name style="width: 100%"/> @*image of the pizza*@

                    @*this checks whether the pizza is vegan or vegetarian and displays an icon showing this*@
                    @if (pizza.Vegetarian == true)
                    {
                        @if (pizza.Vegan == true)
                        {
                            // display vegan
                            <span class="price" style="color: forestgreen">Vegan</span><br />
                        }
                        else
                        {
                            //its only vegetarian so display vegetarian logo
                            <span class="price" style="color: forestgreen">Vegetarian</span><br />
                        }
                    }
                    else
                    {
                        // it is neither vegan or vegetarian so leave a space
                        <div style="flex-basis: 100%; height: 0%"></div><br /><br />
                    }

                    <span class="title">@pizza.Name</span><br />
                    <span class="price">@pizza.Price</span><br />
                    <button class="button-1" style="width:90%; height: 15%; margin-left: 5%">Learn more</button>
                </div>
            }

            count += 1;
        }
        
        
    }
</div>


@code   
{

    private int count = 1;

    private List<Pizza> todaysPizzas = new List<Pizza>();

    protected override async Task OnInitializedAsync()
    {
        todaysPizzas = await PizzaSvc.GetPizzasAsync();
    }

    

}